<!DOCTYPE html>
<html lang="ne">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Research Gorkha</title>
  <link rel="icon" href="didi_logo.jpg" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    :root {
      --bg-light: #f9fafb;
      --text-light: #111827;
      --bg-dark: #1f2937;
      --text-dark: #f3f4f6;
      --primary: #1e40af;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-light);
      color: var(--text-light);
      transition: all 0.3s ease;
    }

    body.dark {
      background: var(--bg-dark);
      color: var(--text-dark);
    }

    header {
      background: var(--primary);
      color: white;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }

    .clock {
      font-weight: 600;
    }

    .toggle-btn {
      background: #fff;
      color: var(--primary);
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
    }

    .section {
      padding: 2rem;
      max-width: 900px;
      margin: auto;
    }

    .bio {
      text-align: center;
      margin-bottom: 1rem;
    }

    #date-filter-container {
      margin-bottom: 1rem;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    #date-filter-container label {
      font-weight: 600;
    }

    #date-filter-container button {
      padding: 0.3rem 0.8rem;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background-color: var(--primary);
      color: white;
      font-weight: 600;
    }

    #date-filter-container button:hover {
      background-color: #1d4ed8;
    }

    .news-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .news-card {
      background: #fff;
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
      cursor: pointer;
    }

    body.dark .news-card {
      background: #374151;
    }

    .news-card:hover {
      transform: translateY(-5px);
    }

    .news-title {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
    }

    .news-date {
      font-size: 0.9rem;
      color: gray;
    }

    #article {
      display: none;
      margin-top: 2rem;
      padding: 1rem;
      border-left: 4px solid var(--primary);
    }

    #article-images img,
    #article-images video {
      max-width: 100%;
      margin: 1rem 0;
      border-radius: 8px;
    }

    #back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0.6rem 1.2rem;
      font-weight: 600;
      color: white;
      background-color: #1e40af;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      margin-bottom: 1rem;
    }

    #back-btn:hover {
      background-color: #1d4ed8;
    }

    footer {
      background: var(--primary);
      color: white;
      text-align: center;
      padding: 1.5rem;
      margin-top: 3rem;
    }

    footer a {
      color: white;
      text-decoration: none;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin: 0 10px;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .founder-img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      margin-top: 10px;
    }

    /* Smooth slide + fade for About/Policy */
    .slide-content {
      display: none;
      opacity: 0;
      transform: translateY(-10px);
      margin-top: 10px;
      font-size: 0.9rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .slide-content.show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .calc-box {
      margin: 20px auto;
      text-align: center;
      background: #f0f0f0;
      padding: 15px;
      border-radius: 10px;
      max-width: 350px;
      font-size: 0.9rem;
    }

    .calc-box input {
      margin: 5px;
      padding: 4px;
    }

    .calc-box button {
      padding: 5px 10px;
      margin-top: 5px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <header>
    <div class="logo"><img src="didi_logo.jpg" alt="Logo" /><span><strong>Research Gorkha</strong></span></div>
    <div class="clock" id="clock">00:00:00</div>
    <button class="toggle-btn" id="themeToggle">üåô</button>
  </header>

  <section class="section bio">
    <p>‚Äú<strong>‡§ï‡§∏‡•à‡§≤‡§æ‡§à ‡§®‡§™‡•Å‡§∞‡•ç‡§Ø‡§æ‡§â‡§®‡•á ‡§ö‡•ã‡§ü ‡§®‡§ø‡§∑‡•ç‡§™‡§ï‡•ç‡§∑ ‡§™‡§§‡•ç‡§∞‡§ï‡§æ‡§∞‡§ø‡§§‡§æ ‡§π‡§æ‡§Æ‡•ç‡§∞‡•ã ‡§Ö‡§†‡•ã‡§ü</strong>‚Äù</p>
    <p>Follow Us for true and meaningful news we will always with you. ü•∞üôè<br />
      Your cozy corner, <strong>Research Gorkha üíØ</strong></p>
  </section>

  <section class="section" id="news-section">
    <h2>üì∞ Latest News</h2>
    <div id="date-filter-container">
      <label for="filter-date">Filter by Date:</label>
      <input type="date" id="filter-date" />
      <button onclick="applyFilter()">Filter</button>
      <button onclick="clearFilter()">Clear</button>
    </div>
    <div class="news-list" id="news-list"></div>
  </section>

  <section class="section" id="article">
    <button id="back-btn" onclick="goBack()">üîô <span>Back to News</span></button>
    <h2 id="article-title"></h2>
    <p id="article-date"></p>
    <div id="article-images"></div>
    <p id="article-content"></p>
  </section>

  <!-- Small Age Calculator -->
  <section class="calc-box">
    <h4>Age Calculator </h4>
    <label>Date of Birth: <input type="date" id="dob"></label><br />
    <button onclick="calculateAge()">Calculate Age</button>
    <p id="age-result"></p>
    <label>BS Year: <input type="number" id="bs" placeholder="2080"></label>
    <button onclick="bsToAd()">BS ‚Üí AD</button>
    <p id="bs-ad"></p>
    <label>AD Year: <input type="number" id="ad" placeholder="2024"></label>
    <button onclick="adToBs()">AD ‚Üí BS</button>
    <p id="ad-bs"></p>
  </section>

  <footer>
    <div>
      <a href="#" onclick="toggleSlide('about',event)">About Us</a> |
      <a href="#" onclick="toggleSlide('policy',event)">Privacy Policy</a> |
      <a href="https://www.facebook.com/profile.php?id=61556916549386" target="_blank">
        <i class="fab fa-facebook-square"></i> Facebook
      </a>
    </div>
    <div id="about" class="slide-content">
      <p><strong>Research Gorkha</strong> is a dedicated online news portal serving Gorkha and Nepal, committed to
        delivering factual, unbiased, and impactful journalism. Our mission is to give every citizen a voice and provide
        accurate information to the public.</p>
    </div>
    <div id="policy" class="slide-content">
      <p>We respect your privacy. Research Gorkha does not share or sell your data. Cookies are used only for
        performance and analytics. Your trust is our priority, and we comply with Nepali laws on user data protection.
      </p>
    </div>
    <img src="founder.jpg" alt="Founder" class="founder-img">
    <p>&copy; 2025 Research Gorkha. Made with ‚ù§Ô∏è in Nepal.</p>
  </footer>

  <script>
    function updateClock() { document.getElementById("clock").textContent = new Date().toLocaleTimeString(); }
    setInterval(updateClock, 1000); updateClock();
    document.getElementById('themeToggle').onclick = function () { document.body.classList.toggle('dark'); };

    let allNews = [];
    async function loadNews() {
      const res = await fetch('news.json'); allNews = await res.json();
      allNews.sort((a, b) => new Date(b.date) - new Date(a.date)); renderNews(); checkURLForArticle();
    }
    function formatDate(d) {
      return new Date(d).toLocaleDateString('en-GB', { day: '2-digit', month: 'long', year: 'numeric' });
    }
    function renderNews(list = allNews) {
      const c = document.getElementById("news-list");
      if (list.length === 0) { c.innerHTML = '<p>No news found for this date.</p>'; return; }
      c.innerHTML = list.map(n => `<div class="news-card" onclick="showArticle(${n.id})"><div class="news-title">${n.title}</div><div class="news-date">${formatDate(n.date)}</div></div>`).join('');
    }
    function showArticle(id) {
      const n = allNews.find(x => x.id === id); if (!n) return;
      document.getElementById("article-title").textContent = n.title;
      document.getElementById("article-date").textContent = formatDate(n.date);
      document.getElementById("article-content").textContent = n.content;
      const imgC = document.getElementById("article-images"); imgC.innerHTML = '';

      // ‚úÖ Handle old & new JSON formats
      let files = [];
      if (Array.isArray(n.media)) files = n.media;
      else if (Array.isArray(n.images)) files = n.images;
      else if (n.image) files = [n.image];

      files.forEach(file => {
        if (!file) return;
        const ext = file.split('.').pop().toLowerCase();
        if (['mp4', 'webm', 'ogg'].includes(ext)) {
          const vid = document.createElement("video");
          vid.src = file; vid.controls = true; vid.style.maxWidth = "100%"; imgC.appendChild(vid);
        } else {
          const img = document.createElement("img");
          img.src = file; imgC.appendChild(img);
        }
      });

      document.getElementById("news-section").style.display = 'none';
      document.getElementById("article").style.display = 'block';
      history.pushState(null, '', `?id=${id}`);
    }
    function goBack() { document.getElementById("article").style.display = 'none'; document.getElementById("news-section").style.display = 'block'; history.pushState(null, '', 'index.html'); }
    function applyFilter() { const d = document.getElementById('filter-date').value; if (!d) { alert('Select a date'); return; } renderNews(allNews.filter(n => n.date === d)); }
    function clearFilter() { document.getElementById('filter-date').value = ''; renderNews(allNews); }
    function checkURLForArticle() { const p = new URLSearchParams(window.location.search).get("id"); if (p) { const i = setInterval(() => { if (allNews.length > 0) { clearInterval(i); showArticle(parseInt(p)); } }, 100); } } loadNews();

    function toggleSlide(id, e) {
      if (e) e.preventDefault();
      const sec = document.getElementById(id);
      const already = sec.classList.contains('show');
      document.querySelectorAll('.slide-content').forEach(d => d.classList.remove('show'));
      if (!already) {
        sec.classList.add('show');
        setTimeout(() => sec.classList.remove('show'), 6000);
      }
    }

    function calculateAge() {
      const dob = new Date(document.getElementById('dob').value); if (!dob.getTime()) return;
      const now = new Date(); let y = now.getFullYear() - dob.getFullYear(), m = now.getMonth() - dob.getMonth(), d = now.getDate() - dob.getDate();
      if (d < 0) { m--; d += 30; } if (m < 0) { y--; m += 12; }
      document.getElementById('age-result').textContent = `Age: ${y} Years, ${m} Months, ${d} Days`;
    }
    function bsToAd() { const bs = parseInt(document.getElementById('bs').value); if (!bs) return; document.getElementById('bs-ad').textContent = `AD: ${bs - 57}`; }
    function adToBs() { const ad = parseInt(document.getElementById('ad').value); if (!ad) return; document.getElementById('ad-bs').textContent = `BS: ${ad + 57}`; }
  </script>
</body>

</html>
